(this["webpackJsonpcampus-connect"]=this["webpackJsonpcampus-connect"]||[]).push([[0],{24:function(e,t,a){e.exports=a.p+"static/media/campus-splash.3195ce31.jpg"},30:function(e,t,a){e.exports=a(54)},36:function(e,t,a){},44:function(e,t,a){},46:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),s=a(23),l=a.n(s),r=a(5),o=a(16),i=a.n(o),u=(a(14),a(15),a(36),a(24)),m=a.n(u),h=a(12),p=a.n(h),d=p.a.initializeApp({apiKey:"AIzaSyCyDHGruN8xp9eVLQMLnZvRfebsz0Xf0PI",authDomain:"school-chat-app-b3b2e.firebaseapp.com",databaseURL:"https://school-chat-app-b3b2e.firebaseio.com",projectId:"school-chat-app-b3b2e",storageBucket:"school-chat-app-b3b2e.appspot.com",messagingSenderId:"1015167689558",appId:"1:1015167689558:web:38f0fe084e2aa585c0acf7",measurementId:"G-2W8824YD6F"}).firestore(),b=p.a.auth(),E=new p.a.auth.GoogleAuthProvider,f=d;a(44);function v(e){var t=e.setClass,a=e.currentClass,n=e.setSchool,s=e.currentSchool,l=e.classes,r=e.schools,o=e.onSubmit;return c.a.createElement("form",{onSubmit:function(){return o(!0)},className:e.className},c.a.createElement("label",{htmlFor:"input-school"},"School:"),c.a.createElement("select",{onChange:function(e){return n(e.target.value)},id:"input-school",name:"input-school",value:s},r&&r.map((function(e){return c.a.createElement("option",{key:e.id.split(" ").join(""),value:e.id},e.id)}))),c.a.createElement("label",{htmlFor:"input-class"},"Class:"),c.a.createElement("select",{onChange:function(e){return t(e.target.value)},id:"input-class",name:"input-class",value:a},l&&l.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.id)}))),c.a.createElement("button",null,"Submit"))}var S=a(25);function C(e){return c.a.createElement("button",{className:e.className,onClick:function(){b.signInWithPopup(E)}},"Sign in with Google")}var g=function(e){var t=e.setClass,a=e.currentClass,n=e.setSchool,s=e.currentSchool,l=e.classes,o=e.schools,i=(e.setCurrentScreen,e.onSubmit),u=Object(S.a)(b),h=Object(r.a)(u,1)[0];return c.a.createElement("div",{className:"Home"},c.a.createElement("header",null,c.a.createElement("h1",null,"App"),c.a.createElement("nav",null,c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("button",null,"Admin"))))),c.a.createElement("main",null,c.a.createElement("div",{className:"splash-container"},c.a.createElement("h1",null,"Campus Connect"),c.a.createElement("img",{src:m.a,alt:"Campus splash"})),h?c.a.createElement(v,{onSubmit:function(){return i(!0)},className:"home-picker",currentClass:a,currentSchool:s,setClass:t,setSchool:n,schools:o,classes:l}):c.a.createElement(C,{className:"google-signin"})),c.a.createElement("footer",{className:"contact-container"},c.a.createElement("span",null,"Conor Roberts : Conor@ConorRoberts.com",c.a.createElement("br",null),"Eric Santos : santeric@gmail.com")))},N=a(17),j=a.n(N),O=a(26),y=(a(46),a(9)),k=a(27),w=a.n(k);function x(e){var t=e.setClass,a=e.currentClass,n=e.setSchool,s=e.currentSchool,l=e.classes,r=e.schools;return c.a.createElement("div",{className:"Chat"},c.a.createElement("div",{className:"top-bar"},c.a.createElement("div",{className:"sidebar-container"},c.a.createElement(w.a,{className:"menu-icon"}),c.a.createElement("div",{className:"side-menu"},c.a.createElement(v,{className:"chat-picker",currentClass:a,currentSchool:s,setClass:t,setSchool:n,schools:r,classes:l}))),c.a.createElement("div",{className:"class-label-container"},c.a.createElement("span",null,a))),c.a.createElement(R,{currentClass:a,currentSchool:s}))}function I(e){var t=e.message,a=t.text,n=t.sender_name,s=t.sender_email,l=(t.timestamp,t.photoURL);return c.a.createElement("div",{className:"message"},c.a.createElement("div",null,l?c.a.createElement("img",{src:l}):""),c.a.createElement("p",null,c.a.createElement("strong",null,n," (",s,")"),c.a.createElement("br",null),a))}function R(e){var t=Object(n.useRef)(),a=f.collection("schools").doc(e.currentSchool).collection("classes").doc(e.currentClass).collection("messages"),s=a.orderBy("timestamp"),l=Object(y.a)(s,{idField:"id"}),o=Object(r.a)(l,1)[0],u=Object(n.useState)(""),m=Object(r.a)(u,2),h=m[0],p=m[1],d=function(){var e=Object(O.a)(j.a.mark((function e(t){var n,c,s,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=b.currentUser,c=n.displayName,s=n.email,l=n.photoURL,!h){e.next=6;break}return e.next=5,a.add({text:h,timestamp:i.a.firestore.FieldValue.serverTimestamp(),sender_name:c,sender_email:s,photoURL:l});case 5:p("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return t.current.scrollIntoView({behavior:"smooth"})}),[o]),c.a.createElement("div",{className:"chat-component"},c.a.createElement("div",{className:"chat-window"},c.a.createElement("p",{className:"beginning-label"},"This is the beginning of the messages"),o&&o.map((function(e){return c.a.createElement(I,{key:e.id,message:e})})),c.a.createElement("div",{ref:t})),c.a.createElement("form",{className:"form-container",onSubmit:d},c.a.createElement("input",{className:"send-box",value:h,onChange:function(e){return p(e.target.value)},placeholder:"   Message..."}),c.a.createElement("button",{className:"send-btn",type:"submit"},"Send")))}function F(e){var t=Object(n.useState)("University of Guelph"),a=Object(r.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)("MCS1000"),i=Object(r.a)(o,2),u=i[0],m=i[1],h=f.collection("schools"),p=h.doc(s).collection("classes"),d=Object(y.a)(h,{idField:"id"}),b=Object(r.a)(d,1)[0],E=Object(y.a)(p,{idField:"id"}),v=Object(r.a)(E,1)[0],S=Object(n.useState)(!0),C=Object(r.a)(S,2),N=(C[0],C[1]),j=Object(n.useState)("chat"),O=Object(r.a)(j,2),k=O[0],w=O[1];return"chat"===k?c.a.createElement("div",null,c.a.createElement(x,{currentClass:u,currentSchool:s,setClass:m,setSchool:l,schools:b,classes:v,schoolsQuery:h,classesQuery:p,setCurrentScreen:w})):"home"===k?c.a.createElement("div",null,c.a.createElement(g,{setCurrentScreen:w,onSubmit:N,currentClass:u,currentSchool:s,setClass:m,setSchool:l,schools:b,classes:v,schoolsQuery:h,classesQuery:p})):void 0}l.a.render(c.a.createElement(F,null),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.d5bbf8fc.chunk.js.map