(this["webpackJsonpcampus-connect"]=this["webpackJsonpcampus-connect"]||[]).push([[0],{23:function(e,t,a){e.exports=a.p+"static/media/campus-splash.3195ce31.jpg"},30:function(e,t,a){e.exports=a(55)},36:function(e,t,a){},44:function(e,t,a){},46:function(e,t,a){},53:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a.n(s),n=a(22),l=a.n(n),o=a(5),r=(a(13),a(15),a(36),a(23)),i=a.n(r),m=a(12),u=a.n(m),d=u.a.initializeApp({apiKey:"AIzaSyCyDHGruN8xp9eVLQMLnZvRfebsz0Xf0PI",authDomain:"school-chat-app-b3b2e.firebaseapp.com",databaseURL:"https://school-chat-app-b3b2e.firebaseio.com",projectId:"school-chat-app-b3b2e",storageBucket:"school-chat-app-b3b2e.appspot.com",messagingSenderId:"1015167689558",appId:"1:1015167689558:web:38f0fe084e2aa585c0acf7",measurementId:"G-2W8824YD6F"}).firestore(),h=u.a.auth(),p=new u.a.auth.GoogleAuthProvider,b=d;a(44);function S(e){var t=e.setClass,a=e.setSchool,s=e.classes,n=e.schools,l=e.setSelectedClass,o=e.setSelectedSchool,r=e.selectedSchool,i=e.selectedClass,m=e.onSubmit;return c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a(r),t(i),m&&m()},className:e.className},c.a.createElement("label",{htmlFor:"input-school"},"School:"),c.a.createElement("select",{onChange:function(e){return o(e.target.value)},id:"input-school",name:"input-school",value:r},n&&n.map((function(e){return c.a.createElement("option",{key:e.id.split(" ").join(""),value:e.id},e.id)}))),c.a.createElement("label",{htmlFor:"input-class"},"Class:"),c.a.createElement("select",{onChange:function(e){return l(e.target.value)},id:"input-class",name:"input-class",value:i},s&&s.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.id)}))),c.a.createElement("button",null,"Submit"))}var E=a(24);function f(e){return c.a.createElement("button",{className:e.className,onClick:function(){h.signInWithPopup(p)}},"Sign in with Google")}var C=function(e){var t=e.setClass,a=e.setSchool,s=e.classes,n=e.schools,l=e.setCurrentScreen,r=e.setSelectedSchool,m=e.setSelectedClass,u=e.selectedClass,d=e.selectedSchool,p=Object(E.a)(h),b=Object(o.a)(p,1)[0];return c.a.createElement("div",{className:"Home"},c.a.createElement("header",null,c.a.createElement("h1",null,"Campus Connect"),c.a.createElement("nav",{className:"top-bar"},c.a.createElement("ul",null,b&&("conor@conorroberts.com"===h.currentUser.email||"sante4832@gmail.com"===h.currentUser.email)&&c.a.createElement("li",null,c.a.createElement("button",{onClick:function(){return l("admin")}},"Admin"))))),c.a.createElement("main",null,c.a.createElement("div",{className:"splash-container"},c.a.createElement("img",{src:i.a,alt:"Campus splash"})),b?c.a.createElement(S,{onSubmit:function(){return l("chat")},className:"home-picker",setClass:t,setSchool:a,schools:n,classes:s,selectedClass:u,selectedSchool:d,setSelectedClass:m,setSelectedSchool:r}):c.a.createElement(f,{className:"google-signin"})),c.a.createElement("footer",{className:"contact-container"},c.a.createElement("span",null,"Conor Roberts : Conor@ConorRoberts.com",c.a.createElement("br",null),"Eric Santos : santeric2001@gmail.com")))},v=a(16),g=a.n(v),j=a(25),N=(a(46),a(26)),O=a.n(N),y=a(9),k=a(27),w=a.n(k);function x(e){var t=e.setClass,a=e.currentClass,s=e.setSchool,n=e.currentSchool,l=e.classes,o=e.schools,r=e.setSelectedSchool,i=e.setSelectedClass,m=e.selectedClass,u=e.selectedSchool;return c.a.createElement("div",{className:"Chat"},c.a.createElement("div",{className:"top-bar"},c.a.createElement("div",{className:"sidebar-container"},c.a.createElement(w.a,{className:"menu-icon"}),c.a.createElement("div",{className:"side-menu"},c.a.createElement(S,{className:"chat-picker",setClass:t,setSchool:s,schools:o,classes:l,selectedClass:m,selectedSchool:u,setSelectedClass:i,setSelectedSchool:r}))),c.a.createElement("div",{className:"class-label-container"},c.a.createElement("span",null,a))),c.a.createElement(R,{currentClass:a,currentSchool:n}))}function I(e){var t=e.message,a=t.text,s=t.sender_name,n=t.sender_email,l=t.photoURL;return c.a.createElement("div",{className:"message"},c.a.createElement("div",null,l?c.a.createElement("img",{alt:"Profile icon",src:l}):""),c.a.createElement("p",null,c.a.createElement("strong",null,s," (",n,")"),c.a.createElement("br",null),a))}function R(e){var t=Object(s.useRef)(),a=b.collection("schools").doc(e.currentSchool).collection("classes").doc(e.currentClass).collection("messages"),n=a.orderBy("timestamp"),l=Object(y.a)(n,{idField:"id"}),r=Object(o.a)(l,1)[0],i=Object(s.useState)(""),m=Object(o.a)(i,2),u=m[0],d=m[1],p=function(){var e=Object(j.a)(g.a.mark((function e(t){var s,c,n,l;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s=h.currentUser,c=s.displayName,n=s.email,l=s.photoURL,!u){e.next=6;break}return e.next=5,a.add({text:u,timestamp:O.a.firestore.FieldValue.serverTimestamp(),sender_name:c,sender_email:n,photoURL:l});case 5:d("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){return t.current.scrollIntoView({behavior:"smooth"})}),[r]),c.a.createElement("div",{className:"chat-component"},c.a.createElement("div",{className:"chat-window"},c.a.createElement("p",{className:"beginning-label"},"This is the beginning of the messages"),r&&r.map((function(e){return c.a.createElement(I,{key:e.id,message:e})})),c.a.createElement("div",{ref:t})),c.a.createElement("form",{className:"form-container",onSubmit:p},c.a.createElement("input",{className:"send-box",value:u,onChange:function(e){return d(e.target.value)},placeholder:"   Message..."}),c.a.createElement("button",{className:"send-btn",type:"submit"},"Send")))}a(53);function U(e){var t=e.setCurrentScreen;return c.a.createElement("div",null,c.a.createElement("button",{onClick:function(){return t("home")}},"Home"),c.a.createElement("form",null,c.a.createElement("input",{placeholder:"Class name..."})))}function F(e){var t=Object(s.useState)("University of Guelph"),a=Object(o.a)(t,2),n=a[0],l=a[1],r=Object(s.useState)("MCS1000"),i=Object(o.a)(r,2),m=i[0],u=i[1],d=Object(s.useState)(n),h=Object(o.a)(d,2),p=h[0],S=h[1],E=Object(s.useState)(m),f=Object(o.a)(E,2),v=f[0],g=f[1],j=b.collection("schools"),N=j.doc(p).collection("classes"),O=Object(y.a)(j,{idField:"id"}),k=Object(o.a)(O,1)[0],w=Object(y.a)(N,{idField:"id"}),I=Object(o.a)(w,1)[0],R=Object(s.useState)("home"),F=Object(o.a)(R,2),L=F[0],D=F[1];return"chat"===L?c.a.createElement(x,{currentClass:m,currentSchool:n,selectedClass:v,selectedSchool:p,setClass:u,setSchool:l,schools:k,classes:I,schoolsQuery:j,classesQuery:N,setCurrentScreen:D,setSelectedClass:g,setSelectedSchool:S}):"home"===L?c.a.createElement(C,{setCurrentScreen:D,currentClass:m,currentSchool:n,selectedClass:v,selectedSchool:p,setSelectedClass:g,setSelectedSchool:S,setClass:u,setSchool:l,schools:k,classes:I,schoolsQuery:j,classesQuery:N}):"admin"===L?c.a.createElement(U,{setCurrentScreen:D}):void 0}l.a.render(c.a.createElement(F,null),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.ddbd84a6.chunk.js.map