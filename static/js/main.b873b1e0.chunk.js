(this["webpackJsonpcampus-connect"]=this["webpackJsonpcampus-connect"]||[]).push([[0],{25:function(e,t,a){e.exports=a.p+"static/media/campus-splash.3195ce31.jpg"},34:function(e,t,a){e.exports=a(60)},40:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},58:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(24),l=a.n(c),o=a(4),r=(a(17),a(19),a(40),a(25)),i=a.n(r),u=a(9),m=a.n(u),d=m.a.initializeApp({apiKey:"AIzaSyCyDHGruN8xp9eVLQMLnZvRfebsz0Xf0PI",authDomain:"school-chat-app-b3b2e.firebaseapp.com",databaseURL:"https://school-chat-app-b3b2e.firebaseio.com",projectId:"school-chat-app-b3b2e",storageBucket:"school-chat-app-b3b2e.appspot.com",messagingSenderId:"1015167689558",appId:"1:1015167689558:web:38f0fe084e2aa585c0acf7",measurementId:"G-2W8824YD6F"}).firestore(),h=m.a.auth(),p=new m.a.auth.GoogleAuthProvider,b=d;a(48);function f(e){var t=e.setClass,a=e.setSchool,n=e.classes,c=e.schools,l=e.setSelectedClass,o=e.setSelectedSchool,r=e.selectedSchool,i=e.selectedClass,u=e.onSubmit;return s.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a(r),t(i),u&&u()},className:e.className},s.a.createElement("label",{htmlFor:"input-school"},"School:"),s.a.createElement("select",{onChange:function(e){return o(e.target.value)},id:"input-school",name:"input-school",value:r},c&&c.map((function(e){return s.a.createElement("option",{key:e.id.split(" ").join(""),value:e.id},e.id)}))),s.a.createElement("label",{htmlFor:"input-class"},"Class:"),s.a.createElement("select",{onChange:function(e){return l(e.target.value)},id:"input-class",name:"input-class",value:i},n&&n.map((function(e){return s.a.createElement("option",{key:e.id,value:e.id},e.id)}))),s.a.createElement("button",null,"Submit"))}var S=a(26);function E(e){return s.a.createElement("button",{className:e.className,onClick:function(){h.signInWithPopup(p)}},"Sign in with Google")}var v=function(e){var t=e.setClass,a=e.setSchool,n=e.classes,c=e.schools,l=e.setCurrentScreen,r=e.setSelectedSchool,u=e.setSelectedClass,m=e.selectedClass,d=e.selectedSchool,p=Object(S.a)(h),b=Object(o.a)(p,1)[0];return s.a.createElement("div",{className:"Home"},s.a.createElement("header",null,s.a.createElement("h1",null,"Campus Connect"),s.a.createElement("nav",{className:"top-bar"},s.a.createElement("ul",null,b&&("conor@conorroberts.com"===h.currentUser.email||"sante4832@gmail.com"===h.currentUser.email)&&s.a.createElement("li",null,s.a.createElement("button",{onClick:function(){return l("admin")}},"Admin"))))),s.a.createElement("main",null,s.a.createElement("div",{className:"splash-container"},s.a.createElement("img",{src:i.a,alt:"Campus splash"})),b?s.a.createElement(f,{onSubmit:function(){return l("chat")},className:"home-picker",setClass:t,setSchool:a,schools:c,classes:n,selectedClass:m,selectedSchool:d,setSelectedClass:u,setSelectedSchool:r}):s.a.createElement(E,{className:"google-signin"})),s.a.createElement("footer",{className:"contact-container"},s.a.createElement("span",null,"Conor Roberts : Conor@ConorRoberts.com",s.a.createElement("br",null),"Eric Santos : santeric2001@gmail.com")))},C=(a(49),a(31)),g=a.n(C),j=a(32),N=a.n(j),O=a(10),y=a.n(O),k=a(16);a(51);function w(e){var t=e.message,a=t.text,n=t.sender_name,c=t.sender_email,l=t.photoURL,o=t.is_question;return s.a.createElement("div",{className:"ChatMessage message ".concat(o?"question":"")},s.a.createElement("div",null,l?s.a.createElement("img",{alt:"Profile icon",src:l}):""),s.a.createElement("p",null,s.a.createElement("strong",null,n," (",c,")"),s.a.createElement("br",null),a))}var q=a(12),x=a(27),F=a.n(x),_=a(30),I=a.n(_),U=(a(52),a(28)),A=a.n(U);function R(e){var t=Object(n.useRef)(),a=b.collection("schools").doc(e.currentSchool).collection("classes").doc(e.currentClass).collection("messages"),c=a.orderBy("timestamp"),l=Object(q.a)(c,{idField:"id"}),r=Object(o.a)(l,1)[0],i=Object(n.useState)(!1),u=Object(o.a)(i,2),m=u[0],d=u[1],p=Object(n.useState)(""),f=Object(o.a)(p,2),S=f[0],E=f[1],v=function(){var e=Object(k.a)(y.a.mark((function e(t){var n,s,c,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=h.currentUser,s=n.displayName,c=n.email,l=n.photoURL,!S){e.next=6;break}return e.next=5,a.add({text:S,timestamp:F.a.firestore.FieldValue.serverTimestamp(),sender_name:s,sender_email:c,photoURL:l,is_question:m});case 5:E("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){return t.current.scrollIntoView({behavior:"smooth"})}),[r]);var C=Object(n.useState)(!1),g=Object(o.a)(C,2),j=g[0],N=g[1];return s.a.createElement("div",{className:"ChatBox"},s.a.createElement("div",{className:j?"chat-window squished":"chat-window"},s.a.createElement("p",{className:"beginning-label"},"This is the beginning of the messages"),r&&r.map((function(e){return s.a.createElement(w,{key:e.id,message:e})})),s.a.createElement("div",{ref:t})),s.a.createElement(A.a,{onClick:function(){N(!j)},className:"questions-menu-button"}),s.a.createElement("div",{className:j?"questions-container opened":"questions-container"},r&&r.filter((function(e){return e.is_question&&!0===e.is_question})).map((function(e){return s.a.createElement(w,{key:e.id+"-question",message:e})}))),s.a.createElement("form",{className:"form-container",onSubmit:v},s.a.createElement("input",{className:"send-box",value:S,onChange:function(e){return E(e.target.value)},placeholder:"Message..."}),s.a.createElement("button",{onClick:function(){return d(!m)},className:"question-button ".concat(m?"on":"off"),type:"button"},s.a.createElement(I.a,{className:"question-icon"})),s.a.createElement("button",{className:"send-btn",type:"submit"},"Send")))}function D(e){var t=e.setClass,a=e.currentClass,n=e.setSchool,c=e.currentSchool,l=e.classes,o=e.schools,r=e.setSelectedSchool,i=e.setSelectedClass,u=e.selectedClass,m=e.selectedSchool,d=e.setCurrentScreen;return s.a.createElement("div",{className:"Chat"},s.a.createElement("div",{className:"top-bar"},s.a.createElement("div",{className:"sidebar-container"},s.a.createElement(g.a,{className:"menu-icon"}),s.a.createElement("div",{className:"side-menu"},s.a.createElement(f,{className:"chat-picker",setClass:t,setSchool:n,schools:o,classes:l,selectedClass:u,selectedSchool:m,setSelectedClass:i,setSelectedSchool:r}))),s.a.createElement("div",{className:"question-sidebar-container"}),s.a.createElement("div",{className:"class-label-container"},s.a.createElement("span",null,a)),s.a.createElement(N.a,{onClick:function(){return d("home")},className:"home-icon"})),s.a.createElement(R,{currentClass:a,currentSchool:c}))}a(58);function G(e){var t=e.setCurrentScreen,a=e.schools,c=Object(n.useState)(""),l=Object(o.a)(c,2),r=l[0],i=l[1],u=Object(n.useState)("University of Guelph"),d=Object(o.a)(u,2),h=d[0],p=d[1];function f(){return(f=Object(k.a)(y.a.mark((function e(t,a,n){var s,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(s=b.collection("schools").doc(a).collection("classes").doc(n)).set({id:n}),c=s.collection("messages"),e.next=6,c.add({text:"First message",timestamp:m.a.firestore.FieldValue.serverTimestamp(),sender_name:"Admin",sender_email:"admin"});case 6:console.log("Added class to ".concat(a," > ").concat(n,".")),i("");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return s.a.createElement("div",{className:"Admin"},s.a.createElement("button",{className:"home-button",onClick:function(){return t("home")}},"Home"),s.a.createElement("form",{className:"admin-form",onSubmit:function(e){return function(e,t,a){return f.apply(this,arguments)}(e,h,r)}},s.a.createElement("label",{htmlFor:"input-school"},"School:"),s.a.createElement("select",{onChange:function(e){return p(e.target.value)},id:"input-school",name:"input-school",value:h},a&&a.map((function(e){return s.a.createElement("option",{key:e.id.split(" ").join(""),value:e.id},e.id)}))),s.a.createElement("input",{value:r,placeholder:"Class name...",onChange:function(e){return i(e.target.value)}}),s.a.createElement("button",{type:"submit"},"Add Class")))}function L(){var e=Object(n.useState)("University of Guelph"),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)("MCS1000"),r=Object(o.a)(l,2),i=r[0],u=r[1],m=Object(n.useState)(a),d=Object(o.a)(m,2),h=d[0],p=d[1],f=Object(n.useState)(i),S=Object(o.a)(f,2),E=S[0],C=S[1],g=b.collection("schools"),j=g.doc(h).collection("classes"),N=Object(q.a)(g,{idField:"id"}),O=Object(o.a)(N,1)[0],y=Object(q.a)(j,{idField:"id"}),k=Object(o.a)(y,1)[0],w=Object(n.useState)("home"),x=Object(o.a)(w,2),F=x[0],_=x[1];return"chat"===F?s.a.createElement(D,{currentClass:i,currentSchool:a,selectedClass:E,selectedSchool:h,setClass:u,setSchool:c,schools:O,classes:k,schoolsQuery:g,classesQuery:j,setCurrentScreen:_,setSelectedClass:C,setSelectedSchool:p}):"home"===F?s.a.createElement(v,{setCurrentScreen:_,currentClass:i,currentSchool:a,selectedClass:E,selectedSchool:h,setSelectedClass:C,setSelectedSchool:p,setClass:u,setSchool:c,schools:O,classes:k,schoolsQuery:g,classesQuery:j}):"admin"===F?s.a.createElement(G,{setCurrentScreen:_,schools:O}):void 0}l.a.render(s.a.createElement(L,null),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.b873b1e0.chunk.js.map