{"version":3,"sources":["assets/campus-splash.jpg","firebase.js","components/Picker/Picker.js","screens/Home/Home.js","screens/Chat/Chat.js","App.js","index.js"],"names":["module","exports","firestore","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","provider","GoogleAuthProvider","Picker","props","setClass","currentClass","setSchool","currentSchool","classes","schools","onSubmit","className","htmlFor","onChange","e","target","value","id","name","map","school","key","split","join","c","SignIn","onClick","signInWithPopup","Home","setCurrentScreen","useAuthState","user","src","splashImage","alt","Chat","ChatBox","ChatMessage","message","text","sender_name","sender_email","photoURL","timestamp","dummy","useRef","messagesRef","collection","doc","query","orderBy","useCollectionData","idField","messages","useState","formValue","setFormValue","sendMessage","a","preventDefault","currentUser","displayName","email","add","FieldValue","serverTimestamp","useEffect","current","scrollIntoView","behavior","msg","ref","placeholder","type","App","schoolsQuery","classesQuery","setFormSubmitted","currentScreen","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d5bbf8fc.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/campus-splash.3195ce31.jpg\";","import firebase from \"firebase\";\r\n\r\nconst firebaseApp = firebase.initializeApp({\r\n    apiKey: \"AIzaSyCyDHGruN8xp9eVLQMLnZvRfebsz0Xf0PI\",\r\n    authDomain: \"school-chat-app-b3b2e.firebaseapp.com\",\r\n    databaseURL: \"https://school-chat-app-b3b2e.firebaseio.com\",\r\n    projectId: \"school-chat-app-b3b2e\",\r\n    storageBucket: \"school-chat-app-b3b2e.appspot.com\",\r\n    messagingSenderId: \"1015167689558\",\r\n    appId: \"1:1015167689558:web:38f0fe084e2aa585c0acf7\",\r\n    measurementId: \"G-2W8824YD6F\"\r\n});\r\n\r\nconst firestore = firebaseApp.firestore();\r\nconst auth = firebase.auth();\r\nconst provider = new firebase.auth.GoogleAuthProvider();\r\n\r\nexport {auth,provider};\r\nexport default firestore;","import React from \"react\";\r\nimport \"firebase/firestore\";\r\nimport \"firebase/auth\";\r\nimport \"./Picker.css\";\r\n\r\nexport default function Picker(props){\r\n  const {setClass,currentClass,setSchool,currentSchool,classes,schools,onSubmit}=props;\r\n\r\n  return(\r\n    <form onSubmit={()=>onSubmit(true)} className={props.className}>\r\n        <label htmlFor=\"input-school\">School:</label>\r\n        <select onChange={(e)=> setSchool(e.target.value)} id=\"input-school\" name=\"input-school\" value={currentSchool}>\r\n          {schools && \r\n          schools.map((school)=><option key={school.id.split(\" \").join(\"\")} value={school.id}>{school.id}</option>)}\r\n        </select>\r\n        <label htmlFor=\"input-class\">Class:</label>\r\n        <select onChange={(e)=>setClass(e.target.value)} id=\"input-class\" name=\"input-class\" value={currentClass}>\r\n          {classes && \r\n          classes.map((c)=><option key={c.id} value={c.id}>{c.id}</option>)}\r\n        </select>\r\n        <button>\r\n          Submit\r\n        </button>\r\n      </form>\r\n  )\r\n  // return(\r\n  //   <form onSubmit={()=>onSubmit(true)} className={props.className}>\r\n  //     <Autocomplete\r\n  //       id=\"school-picker\"\r\n  //       options={schools}\r\n  //       // value={schools && schools[0]}\r\n  //       getOptionLabel={(option) => option.id}\r\n  //       style={{ width: 300 }}\r\n  //       renderInput={(params) => <TextField {...params} label=\"School\" variant=\"outlined\" />}\r\n  //       onChange={(e,newValue)=>setSchool(newValue.id)}\r\n  //       />\r\n  //     <Autocomplete\r\n  //       id=\"class-picker\"\r\n  //       options={classes}\r\n  //       value={classes[0]}\r\n  //       getOptionLabel={(option) => option.id}\r\n  //       style={{ width: 300 }}\r\n  //       renderInput={(params) => <TextField {...params} label=\"Class\" variant=\"outlined\" />}\r\n  //       onChange={(e,newValue)=>setClass(newValue.id)}\r\n  //     />\r\n  //     <button>\r\n  //       Submit\r\n  //     </button>\r\n  //   </form>\r\n  // )\r\n}","import React from \"react\";\r\nimport firebase from \"firebase/app\";\r\nimport \"firebase/firestore\";\r\nimport \"firebase/auth\";\r\n\r\nimport './Home.css';\r\nimport splashImage from \"../../assets/campus-splash.jpg\";\r\nimport firestore,{auth,provider} from \"../../firebase\";\r\nimport Picker from \"../../components/Picker/Picker\";\r\nimport {useAuthState} from \"react-firebase-hooks/auth\";\r\n\r\nfunction Home(props) {\r\n  const {setClass,currentClass,setSchool,currentSchool,classes,schools,setCurrentScreen,onSubmit}=props;\r\n  const [user] = useAuthState(auth);\r\n\r\n  return (\r\n    <div className=\"Home\">\r\n      <header>\r\n        <h1>App</h1>\r\n        <nav>\r\n          <ul>\r\n            <li>\r\n              <button>Admin</button>\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n      </header>\r\n      <main>\r\n        <div className=\"splash-container\">\r\n          <h1>Campus Connect</h1>\r\n          <img src={splashImage} alt=\"Campus splash\"/>\r\n        </div>\r\n        {user ? <Picker onSubmit={()=>onSubmit(true)} className=\"home-picker\" currentClass={currentClass} currentSchool={currentSchool} setClass={setClass} setSchool={setSchool} schools={schools} classes={classes}/> : <SignIn className=\"google-signin\"/>}\r\n      </main>\r\n      <footer className=\"contact-container\">\r\n        <span>\r\n          Conor Roberts : Conor@ConorRoberts.com\r\n          <br></br>\r\n          Eric Santos : santeric@gmail.com\r\n        </span>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction SignIn(props){\r\n  const signInWithGoogle = () =>{\r\n    auth.signInWithPopup(provider);\r\n  }\r\n  return(\r\n    <button className={props.className} onClick={signInWithGoogle}>Sign in with Google</button>\r\n  )\r\n}\r\n\r\nfunction SignOut(){\r\n  return auth.currentUser && (\r\n    <button onClick={()=>auth.signOut()}>Sign Out</button>\r\n  )\r\n}\r\n\r\nexport default Home;\r\n","import \"./Chat.css\";\r\nimport React, { useEffect, useRef,useState } from \"react\";\r\nimport firestore,{auth,provider} from \"../../firebase\";\r\nimport firebase from \"firebase/app\";\r\nimport \"firebase/firestore\";\r\nimport \"firebase/auth\";\r\nimport { useCollectionData } from \"react-firebase-hooks/firestore\";\r\nimport Picker from \"../../components/Picker/Picker\";\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\n\r\nexport default function Chat(props) {\r\n\r\n  const {setClass,currentClass,setSchool,currentSchool,classes,schools}=props;\r\n\r\n  return (\r\n    <div className=\"Chat\">\r\n      <div className=\"top-bar\">\r\n        <div className=\"sidebar-container\">\r\n          <MenuIcon className=\"menu-icon\"/>  \r\n          <div className=\"side-menu\">\r\n            <Picker className=\"chat-picker\" currentClass={currentClass} currentSchool={currentSchool} setClass={setClass} setSchool={setSchool} schools={schools} classes={classes}/>\r\n          </div>\r\n        </div>\r\n        <div className=\"class-label-container\">\r\n          <span>{currentClass}</span>\r\n        </div>\r\n      </div>\r\n      <ChatBox currentClass={currentClass} currentSchool={currentSchool}/>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ChatMessage(props) {\r\n  // Retrieving text from message object (passed as prop)\r\n  const { text,sender_name,sender_email,timestamp,photoURL} = props.message;\r\n\r\n  return (\r\n    <div className=\"message\">\r\n      <div>\r\n        {photoURL ? <img src={photoURL}/> : \"\"}\r\n      </div>\r\n      <p>\r\n        <strong>{sender_name} ({sender_email})</strong><br/>{text}\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ChatBox(props) {\r\n\r\n  const dummy = useRef();\r\n  \r\n  // Set reference point for messages collection\r\n  const messagesRef = firestore\r\n    .collection(\"schools\")\r\n    .doc(props.currentSchool)\r\n    .collection(\"classes\")\r\n    .doc(props.currentClass)\r\n    .collection(\"messages\")\r\n\r\n  // Organizing message data retrieved from messagesRef\r\n  const query = messagesRef.orderBy(\"timestamp\");\r\n\r\n  // Not sure what this does. Result saved in messages\r\n  const [messages] = useCollectionData(query, { idField: \"id\" });\r\n\r\n  // Used for modifying text box value\r\n  const [formValue, setFormValue] = useState(\"\");\r\n\r\n  // Function for sending message\r\n  const sendMessage = async (e) => {\r\n    // Prevent browser refresh on form submission\r\n    e.preventDefault();\r\n\r\n    const {displayName,email,photoURL} = auth.currentUser;\r\n\r\n    if (formValue){\r\n      // Add message to firebase collection\r\n      await messagesRef.add({\r\n        text: formValue,\r\n        timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n        sender_name:displayName,\r\n        sender_email:email,\r\n        photoURL\r\n      });\r\n  \r\n      // Reset form value\r\n      setFormValue(\"\");\r\n\r\n      // Old method for scrolling to last message\r\n      // dummy.current.scrollIntoView({behavior:\"smooth\"});\r\n    }\r\n  };\r\n\r\n  // Scroll last message into view on change of messages\r\n  useEffect(()=>dummy.current.scrollIntoView({behavior:\"smooth\"}),\r\n  [messages]);\r\n\r\n  return (\r\n    <div className=\"chat-component\">\r\n      <div className=\"chat-window\">\r\n        <p className= \"beginning-label\">This is the beginning of the messages</p>\r\n        {/* Checks if there are any messages\r\n        renders out all messages, passing the firebase message ID in as the key (for react rendering)\r\n        passes in entire message object for use within later functions */}\r\n        {messages &&\r\n          messages.map((msg) => <ChatMessage key={msg.id} message={msg} />)}\r\n        <div ref={dummy}></div>\r\n      </div>\r\n      <form className=\"form-container\" onSubmit={sendMessage}>\r\n        <input\r\n          className=\"send-box\"\r\n          value={formValue}\r\n          onChange={(e) => setFormValue(e.target.value)}\r\n          placeholder=\"   Message...\"\r\n        />\r\n        <button className=\"send-btn\" type=\"submit\">\r\n          Send\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}","import React, { useState } from \"react\";\r\nimport Home from \"./screens/Home/Home\";\r\nimport Chat from \"./screens/Chat/Chat\";\r\n\r\nimport { useCollectionData } from \"react-firebase-hooks/firestore\";\r\nimport firestore, { auth, provider } from \"./firebase\";\r\n\r\nexport default function App(props) {\r\n  //State for current class\r\n  const [currentSchool, setSchool] = useState(\"University of Guelph\");\r\n  const [currentClass, setClass] = useState(\"MCS1000\");\r\n\r\n  const schoolsQuery = firestore.collection(\"schools\");\r\n  const classesQuery = schoolsQuery.doc(currentSchool).collection(\"classes\");\r\n\r\n  const [schools] = useCollectionData(schoolsQuery, { idField: \"id\" });\r\n  const [classes] = useCollectionData(classesQuery, { idField: \"id\" });\r\n\r\n  const [formSubmitted, setFormSubmitted] = useState(true);\r\n\r\n  const [currentScreen, setCurrentScreen] = useState(\"chat\");\r\n\r\n  if (currentScreen === \"chat\") {\r\n    return (\r\n      <div>\r\n        <Chat\r\n          currentClass={currentClass}\r\n          currentSchool={currentSchool}\r\n          setClass={setClass}\r\n          setSchool={setSchool}\r\n          schools={schools}\r\n          classes={classes}\r\n          schoolsQuery={schoolsQuery}\r\n          classesQuery={classesQuery}\r\n          setCurrentScreen={setCurrentScreen}\r\n          />\r\n      </div>\r\n    );\r\n} else if (currentScreen === \"home\") {\r\n    return (\r\n        <div>\r\n        <Home\r\n            setCurrentScreen={setCurrentScreen}\r\n          onSubmit={setFormSubmitted}\r\n          currentClass={currentClass}\r\n          currentSchool={currentSchool}\r\n          setClass={setClass}\r\n          setSchool={setSchool}\r\n          schools={schools}\r\n          classes={classes}\r\n          schoolsQuery={schoolsQuery}\r\n          classesQuery={classesQuery}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n    <App />,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}